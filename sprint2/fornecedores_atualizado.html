<!DOCTYPE html>
<html lang="pt-BR">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Cadastro de Fornecedor
  </title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&amp;display=swap" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
   <link href="style.css" rel="stylesheet"/>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
  </link>
 </head>
 <body>
  <header class="d-flex justify-content-between align-items-center flex-wrap">
   <h1 class="mb-0">
    Cadastro de Fornecedor
   </h1>
   <a class="btn btn-outline-light btn-sm d-flex align-items-center gap-1 mt-3 mt-md-0" href="index.html">
    <i class="bi bi-arrow-left">
    </i>
    Voltar
   </a>
  </header>
  <main class="container my-5">
   <div class="card-fornecedor">
    <div class="mb-3">
     <label class="form-label" for="busca">
      Buscar Fornecedor:
     </label>
     <input class="form-control" id="busca" placeholder="Digite o nome do fornecedor..." type="text"/>
    </div>
    <form id="form-cadastro">
     <div class="mb-3">
      <label class="form-label" for="nome">
       Nome do Fornecedor
      </label>
      <input class="form-control" id="nome" name="nome" required="" type="text"/>
     </div>
     <div class="mb-3">
      <label class="form-label" for="descricao">
       Descrição dos Produtos
      </label>
      <textarea class="form-control" id="descricao" name="descricao" required="" rows="3"></textarea>
     </div>
     <div class="mb-3">
      <label class="form-label" for="endereco">
       Endereço
      </label>
      <input class="form-control" id="endereco" name="endereco" required="" type="text"/>
     </div>
     <div class="mb-3">
      <label class="form-label" for="email">
       E-mail de Contato
      </label>
      <input class="form-control" id="email" name="email" required="" type="email"/>
     </div>
     <div class="d-grid">
      <button class="btn btn-primary" type="submit">
       Cadastrar Fornecedor
      </button>
     </div>
    </form>
    <ul class="list-group mt-4" id="lista-fornecedores">
    </ul>
   </div>
  </main>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js">
  </script>
  <script src="app.js">
  </script>
  <script>
   document.addEventListener("DOMContentLoaded", () => {
  const form = document.querySelector("form");
  const lista = document.getElementById("lista-fornecedores");
  const busca = document.getElementById("busca");

  const carregarFornecedores = async () => {
    const res = await fetch("http://localhost:3000/fornecedores");
    const fornecedores = await res.json();
    const termo = busca.value.toLowerCase();
    lista.innerHTML = "";
    fornecedores
      .filter(f => f.nome.toLowerCase().includes(termo))
      .forEach(f => {
        const li = document.createElement("li");
        li.className = "list-group-item";
        li.textContent = `${f.nome} - ${f.email || ""}`;
        lista.appendChild(li);
      });
  };

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const nome = document.getElementById("nome").value;
    const email = document.getElementById("email").value;

    await fetch("http://localhost:3000/fornecedores", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ nome, email })
    });
    form.reset();
    carregarFornecedores();
  });

  busca.addEventListener("input", carregarFornecedores);
  carregarFornecedores();
});
  </script>
 </body>
</html>
